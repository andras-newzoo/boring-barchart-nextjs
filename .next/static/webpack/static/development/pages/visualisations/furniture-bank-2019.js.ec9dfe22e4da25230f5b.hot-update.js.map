{"version":3,"file":"static/webpack/static/development/pages/visualisations/furniture-bank-2019.js.ec9dfe22e4da25230f5b.hot-update.js","sources":["webpack:///./components/ConvertedNumber/index.jsx"],"sourcesContent":["import { format } from 'd3-format'\nimport React, { useState } from 'react'\nimport CountUp from \"react-countup\";\nimport styled, { keyframes, css } from 'styled-components'\nimport { fontSizeM, fontWeightS, fontSizeS } from '../../styles/sharedStyles';\n\nexport const getFormattedNumber = ({val, perc, expPlus}) => {\n  let formatKey\n  if(perc){\n    if(expPlus){\n      if( -.1 < val && val < .1  ){formatKey = '+.2%'} else {formatKey = '+.1%'}\n    } else {\n      if( -.1 < val && val < .1 ){formatKey = '.2%'} else {formatKey = '.1%'}\n    }\n  } else {\n    if(expPlus){\n      if( -1 < val && val < 1  ){ formatKey = '+.2f' }else{ formatKey = '+.3s'}\n    } else {\n      if( -1 < val && val < 1  ){ formatKey = '.2f' }else{ formatKey = '.3s'}\n    }\n  }\n  return val ? format(formatKey)(val).replace(/([a-zA-Z%])/g, \"\") : '-'\n}\n\nexport const getSuffix = ({val, custom, perc}) => {\n  if(val === undefined){return ''}\n  if(custom){return custom}\n  if(perc){return \"%\"}\n  if(val < 1000){return ''}\n  if(1000 <= val && val < 1000000){return 'K'}\n  if(1000000 <= val && val < 1000000000){return  'M'}\n  if(1000000000 <= val){return 'B'}\n}\nconst fadein = keyframes`\n    from { opacity: 0; }\n    to   { opacity: 1; }\n`;\n\nconst Container = styled.span`\n  ${props => props.isInitalized && css`\n    animation: ${fadein} 2s;\n  `}\n  font-size: ${props => props.size}; \n  font-weight: ${props => props.weight};\n  ${props => props.smallSuffix && css`\n    .suffix {\n      font-size: ${fontSizeS};\n      margin-left: 3px;\n    }\n  `}\n`\n\nconst ConvertedNumber = ({ data, perc, prefix, weight=fontWeightS, size=fontSizeM, customSuffix, animate, smallSuffix, expPlus, period, suffixSize, suffixSpace }) => {\n  const [ isInitalized, setIsInitalized ] = useState(false)\n  const styles = { weight, size, smallSuffix, suffixSize }\n  if (data === undefined) return <div></div>\n  const suffix = getSuffix({val: data, custom: customSuffix, perc})\n  return (\n    <>\n      <Container\n        {...styles}\n      >\n        {prefix}\n        {\n          animate ?\n          <CountUp\n            end={data}\n            decimals={3}\n            preserveValue\n            formattingFn={val => getFormattedNumber({ val, perc, expPlus })}\n            onEnd={() => !isInitalized && setIsInitalized(true)}\n            duration={2}\n            decimal=\".\"\n          /> :\n          getFormattedNumber({ val: data, perc, expPlus})\n        }\n        {\n          suffix &&\n          <span className=\"suffix\">\n            {\n              suffixSpace &&\n              ' '\n            }\n            {suffix}\n          </span>\n        }\n        {\n          period &&\n          <span className=\"period\">\n            {' '}{period}\n          </span>\n        }\n      </Container>\n    </>\n  )\n}\n\nexport default ConvertedNumber\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;;;;A","sourceRoot":""}