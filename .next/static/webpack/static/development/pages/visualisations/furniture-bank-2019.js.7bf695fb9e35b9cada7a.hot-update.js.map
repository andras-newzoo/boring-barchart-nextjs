{"version":3,"file":"static/webpack/static/development/pages/visualisations/furniture-bank-2019.js.7bf695fb9e35b9cada7a.hot-update.js","sources":["webpack:///./containers/FurnitureBank2019/index.jsx","webpack:///./containers/FurnitureBank2019/styles/index.js","webpack:///./containers/FurnitureBank2019/styles/styledContainers.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport {\n  MainContainer,\n  DashboardContainer,\n  ControlsContainer,\n  ChartsContainer,\n  LogoContainer\n} from \"./styles\";\nimport { ControlContainer } from \"./components\";\nimport { useSelector } from \"react-redux\";\nimport {\n  selectFilteredCoordinates,\n} from \"../../store/furnitureBankReducer/selectors\";\nimport { MapContainer, SocChartsContainer, FamilyContainer } from \"./styles/styledContainers\";\nimport styled from \"styled-components\";\nimport ReactMapGL from \"react-map-gl\";\nimport { heatMapStyles, HEATMAP_SOURCE_ID } from \"./components/Map/styles\";\nimport _ from \"lodash\";\nimport { Paper } from \"@material-ui/core\";\n\nconst MapPaper = styled(Paper)`\n  height: 100%;\n  width: 100%;\n`\nconst Dashboard = () => {\n  const filteredCoordinates = useSelector(selectFilteredCoordinates);\n  const [initMap, setInitMap] = useState(false);\n  const mapRef = useRef();\n  const viewport = {\n    width: \"100%\",\n    height: \"100%\",\n    latitude: 43.66107,\n    longitude: -79.477015,\n    zoom: 8\n  };\n\n  console.log(_.groupBy(filteredCoordinates, \"postal_code\"));\n\n  const handleMapLoaded = () => {\n    mapRef.current\n      .getMap()\n      .addSource(HEATMAP_SOURCE_ID, {\n        type: \"geojson\",\n        data: makeGeoJSON(filteredCoordinates)\n      });\n    mapRef.current.getMap().addLayer(heatMapStyles);\n    setInitMap(true);\n  };\n\n  useEffect(() => {\n    if (initMap) {\n      mapRef.current\n        .getMap()\n        .getSource(HEATMAP_SOURCE_ID)\n        .setData(makeGeoJSON(filteredCoordinates));\n    }\n  }, [filteredCoordinates, initMap]);\n\n  const makeGeoJSON = data => {\n    if (!data) return undefined;\n    return {\n      type: \"FeatureCollection\",\n      features: data.map(feature => {\n        return {\n          type: \"Feature\",\n          properties: {\n            id: feature.postal_code\n          },\n          geometry: {\n            type: \"Point\",\n            coordinates: feature.coors\n              ? [feature.coors.longitude, feature.coors.latitude, 0]\n              : [0, 0, 0]\n          }\n        };\n      })\n    };\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Furniture Bank 2019</title>\n      </Helmet>\n      <MainContainer>\n        <DashboardContainer>\n          <ControlsContainer>\n            <LogoContainer>\n              <img\n                src=\"/static/logos/furnitureBank.svg\"\n                alt=\"furniture bank icon\"\n              />\n            </LogoContainer>\n            <ControlContainer />\n          </ControlsContainer>\n          <ChartsContainer>\n            <SocChartsContainer>\n              <MapContainer>\n                  <MapPaper>\n                    {/* <ReactMapGL\n                      ref={mapRef}\n                      mapboxApiAccessToken=\"pk.eyJ1Ijoic3plYW5kciIsImEiOiJjajlpeWxnNHUzbWNiMzNvcnF1ZGUzbG5rIn0.fk33YGLOHSZtT_CMEWoIag\"\n                      {...viewport}\n                      mapStyle=\"mapbox://styles/szeandr/ck1664yzv02iq1crq35ea679o\"\n                      onLoad={handleMapLoaded}\n                    >\n                    </ReactMapGL> */}\n                  </MapPaper>\n              </MapContainer>\n              <FamilyContainer>\n\n              </FamilyContainer>\n            </SocChartsContainer>\n          </ChartsContainer>\n        </DashboardContainer>\n      </MainContainer>\n    </>\n  );\n};\nexport default Dashboard;\n","import { \n  colorGreen,\n  colorRedDark,\n  colorRed,\n  colorGreyLight,\n  colorGreyDark,\n  media\n} from './variables'\nimport {\n  MainContainer,\n  DashboardContainer,\n  ControlsContainer,\n  LogoContainer,\n  ControlContainer,\n  PanelContainer,\n  ChartsContainer\n} from './styledContainers'\nimport {\n  MainTitle\n} from './styledElements'\n\nexport {\n  colorGreen,\n  colorRedDark,\n  colorRed,\n  colorGreyLight,\n  colorGreyDark,\n  media\n}\nexport { \n  MainContainer,\n  DashboardContainer,\n  ControlsContainer,\n  LogoContainer,\n  ControlContainer,\n  PanelContainer,\n  ChartsContainer\n}\nexport {\n  MainTitle\n}","import { paddingM, paddingS, testBorder } from \"../../../styles/sharedStyles\";\nimport styled from \"styled-components\";\nimport { media } from \"./variables\";\nimport { border } from \"@material-ui/system\";\n\nexport const MainContainer = styled.div`\n  margin: 0;\n  padding: 0;\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  ${testBorder}\n`;\n\nexport const DashboardContainer = styled.div`\n  width: 90%;\n  height: 650px;\n  max-width: 1440px;\n\n  display: grid;\n  grid-template-columns: 300px 1fr;\n  grid-template-areas: \"control charts\";\n\n  ${media.medium`\n    width: 80%;\n    margin: 2.5rem 0;\n\n    grid-template-columns: 1fr;\n    grid-template-rows: 200px 1fr;\n    grid-template-areas:  \"control\"\n                          \"charts\";\n  `}\n`;\n\nexport const ControlsContainer = styled.div`\n  display: grid;\n  grid-area: control;\n\n  grid-template-rows: 100px 1fr;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"title\"\n    \"panel\";\n\n  padding: ${paddingM};\n\n  ${media.medium`\n    grid-template-columns: 200px 1fr;\n    grid-template-rows: 1fr;\n    grid-template-areas:  \"title panel\";\n  `}\n`;\n\nexport const LogoContainer = styled.div`\n  grid-area: title;\n\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  padding: ${paddingS};\n\n  img {\n    width: 100%;\n  }\n`;\n\nexport const ControlContainer = styled.div`\n  grid-area: panel;\n  display: grid;\n\n  padding: ${paddingS};\n\n  grid-template-rows: 50px 1fr;\n  grid-template-areas:\n    \"title\"\n    \"panel\";\n`;\n\nexport const PanelContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  height: ${props => props.height}px;\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  grid-area: panel;\n  ${\"\" /* ${testBorder} */}\n`;\n\nexport const ChartsContainer = styled.div`\n  display: grid;\n  grid-area: charts;\n\n  grid-template-rows: repeat(2, 1fr) 50px;\n  grid-template-areas:\n    \"soc\"\n    \"env\"\n    \"req\";\n`;\n\nexport const SocChartsContainer = styled.div`\n  display: grid;\n  grid-area: soc;\n\n  grid-template-rows: 50px 1fr 100px;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-areas:\n    \"title title\"\n    \"map families\"\n    \"value value\"\n`;\n\nexport const MapContainer = styled.div`\n  grid-area: map;\n  height: 100%;\n  width: 100%;\n  ${border};\n`;\n\nexport const FamilyContainer = styled.div`\n  grid-area: families;\n  height: 100%;\n  width: 100%;\n  ${border};\n`;\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAOA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AAGA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAFA;AALA;AAYA;AAfA;AAiBA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AASA;AAIA;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAoBA;AAAA;AAAA;AAAA;AAmBA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAKA;AAAA;AAOA;AAZA;AAeA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}