{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Set from \"@babel/runtime-corejs2/core-js/set\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport { createSelector } from \"reselect\";\nimport _ from \"lodash\";\n\nconst selectGroupList = state => state.furnitureBankReducer.groups;\n\nconst selectFurnitureList = state => state.furnitureBankReducer.productList;\n\nconst selectedAllSelected = state => state.furnitureBankReducer.selectedItems;\n\nconst selectAllDonation = state => state.furnitureBankReducer.donationsData;\n\nconst selectAllFamily = state => state.furnitureBankReducer.familyData;\n\nconst selectAllCoordinates = state => state.furnitureBankReducer.coordinatesData; //* Array of all selected items\n\n\nexport const selectAllSelected = createSelector(selectedAllSelected, selectedList => selectedList.map(el => el.name));\nexport const selectTotalQuantity = createSelector(selectedAllSelected, selectedList => selectedList.reduce((acc, curr) => acc + curr.quantity, 0));\nexport const selectAllUnselected = createSelector(selectFurnitureList, selectAllSelected, (totalList, allSelected) => totalList.filter(el => !allSelected.map(el => el.toLowerCase()).includes(el.product_name.toLowerCase())));\nexport const selectAllSelectedItems = createSelector(selectFurnitureList, selectedAllSelected, (furnitureList, selectedItems) => selectedItems.map(el => furnitureList.find(d => d.product_name === el.name)));\nexport const selectAllSelectedPrice = createSelector(selectAllSelectedItems, selectedAllSelected, (selectedItems, selectedQuantities) => selectedItems.reduce((acc, curr) => acc + selectedQuantities.find(el => curr.product_name === el.name).quantity * curr.value, 0) // .map(\n//   el =>\n//     +furnitureList.find(d => d.product_name === el.name).value *\n//     el.quantity\n// )\n// .reduce((acc, curr) => acc + curr, 0)\n); //* Get relevant postal code list\n\nexport const selectFilteredDonationPostalCode = createSelector(selectAllDonation, selectAllSelected, (donations, selectedItems) => donations.filter(el => selectedItems.includes(el.product_name))); //* Get family data for postal codes\n\nexport const selectFilteredFamilies = createSelector(selectAllFamily, selectFilteredDonationPostalCode, (families, selectedPostalCodes) => families.filter(el => selectedPostalCodes.includes(el.postal_code))); //* Get coordinates for filtere items\n\nexport const selectFilteredCoordinates = createSelector(selectAllCoordinates, selectFilteredDonationPostalCode, (coordinates, selectedPostalCodes) => selectedPostalCodes.map(el => _objectSpread({}, el, {\n  coors: coordinates.find(d => d.postal_code === el.postal_code)\n}))); //* Get unique list of postal codes\n\nexport const selectUniqueCoordinates = createSelector(selectFilteredDonationPostalCode, filteredPostalCodes => [...new _Set(filteredPostalCodes.map(el => el.postal_code))]); //* Get families from filtered postal codes\n\nexport const selectPostalCodeFamilies = createSelector(selectUniqueCoordinates, selectAllFamily, (postalCodes, families) => families.filter(el => postalCodes.includes(el.postal_code))); //* Top Groups\n\nexport const selectGroups = createSelector(selectPostalCodeFamilies, families => _.groupBy(families, \"segment\"));\nexport const selectTopGroups = createSelector(selectGroups, selectGroupList, selectPostalCodeFamilies, (groups, groupList, total) => groupList.map(el => groups[el] ? {\n  group: el,\n  share: groups[el].length / total.length\n} : {\n  group: el,\n  share: 0\n}).sort((a, b) => b.share - a.share).slice(0, 3)); //* Persons\n\nexport const selectAdults = createSelector(selectPostalCodeFamilies, families => _.mean(families.map(el => _parseInt(el.adults) || 0)));\nexport const selectChildren = createSelector(selectPostalCodeFamilies, families => _.mean(families.map(el => _parseInt(el.children) || 0)));","map":{"version":3,"sources":["/Users/andrasszesztai/Desktop/boring-barchart-nextjs/store/furnitureBankReducer/selectors.js"],"names":["createSelector","_","selectGroupList","state","furnitureBankReducer","groups","selectFurnitureList","productList","selectedAllSelected","selectedItems","selectAllDonation","donationsData","selectAllFamily","familyData","selectAllCoordinates","coordinatesData","selectAllSelected","selectedList","map","el","name","selectTotalQuantity","reduce","acc","curr","quantity","selectAllUnselected","totalList","allSelected","filter","toLowerCase","includes","product_name","selectAllSelectedItems","furnitureList","find","d","selectAllSelectedPrice","selectedQuantities","value","selectFilteredDonationPostalCode","donations","selectFilteredFamilies","families","selectedPostalCodes","postal_code","selectFilteredCoordinates","coordinates","coors","selectUniqueCoordinates","filteredPostalCodes","selectPostalCodeFamilies","postalCodes","selectGroups","groupBy","selectTopGroups","groupList","total","group","share","length","sort","a","b","slice","selectAdults","mean","adults","selectChildren","children"],"mappings":"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","sourcesContent":["import { createSelector } from \"reselect\";\nimport _ from \"lodash\";\n\nconst selectGroupList = state => state.furnitureBankReducer.groups;\nconst selectFurnitureList = state => state.furnitureBankReducer.productList;\nconst selectedAllSelected = state => state.furnitureBankReducer.selectedItems;\nconst selectAllDonation = state => state.furnitureBankReducer.donationsData;\nconst selectAllFamily = state => state.furnitureBankReducer.familyData;\nconst selectAllCoordinates = state =>\n  state.furnitureBankReducer.coordinatesData;\n\n//* Array of all selected items\nexport const selectAllSelected = createSelector(\n  selectedAllSelected,\n  selectedList => selectedList.map(el => el.name)\n);\n\nexport const selectTotalQuantity = createSelector(\n  selectedAllSelected,\n  selectedList => selectedList.reduce((acc, curr) => acc + curr.quantity, 0)\n);\n\nexport const selectAllUnselected = createSelector(\n  selectFurnitureList,\n  selectAllSelected,\n  (totalList, allSelected) =>\n    totalList.filter(\n      el =>\n        !allSelected\n          .map(el => el.toLowerCase())\n          .includes(el.product_name.toLowerCase())\n    )\n);\n\nexport const selectAllSelectedItems = createSelector(\n  selectFurnitureList,\n  selectedAllSelected,\n  (furnitureList, selectedItems) =>\n  selectedItems\n  .map(\n    el =>\n    furnitureList.find(d => d.product_name === el.name)\n  )\n);\n\nexport const selectAllSelectedPrice = createSelector(\n  selectAllSelectedItems,\n  selectedAllSelected,\n  ( selectedItems, selectedQuantities ) =>\n  selectedItems\n    .reduce((acc, curr) => acc + selectedQuantities\n      .find(el => curr.product_name === el.name ).quantity * curr.value, 0 )\n      // .map(\n      //   el =>\n      //     +furnitureList.find(d => d.product_name === el.name).value *\n      //     el.quantity\n      // )\n      // .reduce((acc, curr) => acc + curr, 0)\n);\n\n//* Get relevant postal code list\nexport const selectFilteredDonationPostalCode = createSelector(\n  selectAllDonation,\n  selectAllSelected,\n  (donations, selectedItems) =>\n    donations.filter(el => selectedItems.includes(el.product_name))\n);\n\n//* Get family data for postal codes\nexport const selectFilteredFamilies = createSelector(\n  selectAllFamily,\n  selectFilteredDonationPostalCode,\n  (families, selectedPostalCodes) =>\n    families.filter(el => selectedPostalCodes.includes(el.postal_code))\n);\n\n//* Get coordinates for filtere items\nexport const selectFilteredCoordinates = createSelector(\n  selectAllCoordinates,\n  selectFilteredDonationPostalCode,\n  (coordinates, selectedPostalCodes) =>\n    selectedPostalCodes.map(el => ({\n      ...el,\n      coors: coordinates.find(d => d.postal_code === el.postal_code)\n    }))\n);\n\n//* Get unique list of postal codes\nexport const selectUniqueCoordinates = createSelector(\n  selectFilteredDonationPostalCode,\n  filteredPostalCodes => [\n    ...new Set(filteredPostalCodes.map(el => el.postal_code))\n  ]\n);\n\n//* Get families from filtered postal codes\nexport const selectPostalCodeFamilies = createSelector(\n  selectUniqueCoordinates,\n  selectAllFamily,\n  (postalCodes, families) =>\n    families.filter(el => postalCodes.includes(el.postal_code))\n);\n\n//* Top Groups\nexport const selectGroups = createSelector(\n  selectPostalCodeFamilies,\n  families => _.groupBy(families, \"segment\")\n);\nexport const selectTopGroups = createSelector(\n  selectGroups,\n  selectGroupList,\n  selectPostalCodeFamilies,\n  (groups, groupList, total) =>\n    groupList.map(el =>\n      groups[el]\n        ? { group: el, share: groups[el].length / total.length }\n        : { group: el, share: 0 }\n    ).sort((a,b) => b.share - a.share).slice(0,3)\n);\n\n//* Persons\nexport const selectAdults = createSelector(\n  selectPostalCodeFamilies,\n  families => _.mean(families.map(el => parseInt(el.adults) || 0))\n);\nexport const selectChildren = createSelector(\n  selectPostalCodeFamilies,\n  families => _.mean(families.map(el => parseInt(el.children) || 0))\n);\n"]},"metadata":{},"sourceType":"module"}