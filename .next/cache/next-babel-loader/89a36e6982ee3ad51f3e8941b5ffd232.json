{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/andrasszesztai/Desktop/boring-barchart-nextjs/components/ConvertedNumber/index.jsx\";\nvar __jsx = React.createElement;\nimport { format } from \"d3-format\";\nimport React, { useState } from \"react\";\nimport CountUp from \"react-countup\";\nimport styled, { keyframes, css } from \"styled-components\";\nimport { fontSizeM, fontWeightS, colorGrey } from \"../../styles/sharedStyles\";\nexport var getFormattedNumber = function getFormattedNumber(_ref) {\n  var val = _ref.val,\n      perc = _ref.perc,\n      expPlus = _ref.expPlus;\n  var formatKey;\n\n  if (perc) {\n    if (expPlus) {\n      if (-0.1 < val && val < 0.1) {\n        formatKey = \"+.2%\";\n      } else {\n        formatKey = \"+.1%\";\n      }\n    } else {\n      if (-0.1 < val && val < 0.1) {\n        formatKey = \".2%\";\n      } else {\n        formatKey = \".1%\";\n      }\n    }\n  } else {\n    if (expPlus) {\n      if (-1 < val && val < 1) {\n        formatKey = \"+.2f\";\n      } else {\n        formatKey = \"+.3s\";\n      }\n    } else {\n      if (-1 < val && val < 1) {\n        formatKey = \".2f\";\n      } else {\n        formatKey = \".3s\";\n      }\n    }\n  }\n\n  return val ? format(formatKey)(val).replace(/([a-zA-Z%])/g, \"\") : \"-\";\n};\nexport var getSuffix = function getSuffix(_ref2) {\n  var val = _ref2.val,\n      custom = _ref2.custom,\n      perc = _ref2.perc;\n\n  if (val === undefined) {\n    return \"\";\n  }\n\n  if (custom) {\n    return custom;\n  }\n\n  if (perc) {\n    return \"%\";\n  }\n\n  if (val < 1000) {\n    return \"\";\n  }\n\n  if (1000 <= val && val < 1000000) {\n    return \"K\";\n  }\n\n  if (1000000 <= val && val < 1000000000) {\n    return \"M\";\n  }\n\n  if (1000000000 <= val) {\n    return \"B\";\n  }\n};\nvar fadein = keyframes([\"from{opacity:0;}to{opacity:1;}\"]);\nvar Container = styled.span.withConfig({\n  displayName: \"ConvertedNumber__Container\",\n  componentId: \"jdjwlc-0\"\n})([\"display:\", \";align-items:flex-end;\", \" font-size:\", \";font-weight:\", \";color:\", \";line-height:\", \";\", \"\"], function (props) {\n  return props.display || 'flex';\n}, function (props) {\n  return props.isInitalized && css([\"animation:\", \" 2s;\"], fadein);\n}, function (props) {\n  return props.size;\n}, function (props) {\n  return props.weight;\n}, function (props) {\n  return props.color;\n}, function (props) {\n  return props.lineHeight;\n}, function (props) {\n  return (props.smallSuffix || props.smallPrefix) && css([\".suffix,.prefix{display:block;font-size:\", \";margin-left:3px;line-height:\", \";}\"], props.suffixSize || props.prefixSize, props.suffixLineHeight || props.prefixLineHeight);\n});\n\nvar ConvertedNumber = function ConvertedNumber(_ref3) {\n  var data = _ref3.data,\n      _ref3$duration = _ref3.duration,\n      duration = _ref3$duration === void 0 ? 2 : _ref3$duration,\n      perc = _ref3.perc,\n      prefix = _ref3.prefix,\n      _ref3$weight = _ref3.weight,\n      weight = _ref3$weight === void 0 ? fontWeightS : _ref3$weight,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? fontSizeM : _ref3$size,\n      _ref3$color = _ref3.color,\n      color = _ref3$color === void 0 ? colorGrey : _ref3$color,\n      _ref3$lineHeight = _ref3.lineHeight,\n      lineHeight = _ref3$lineHeight === void 0 ? 1.2 : _ref3$lineHeight,\n      suffixSize = _ref3.suffixSize,\n      suffixLineHeight = _ref3.suffixLineHeight,\n      customSuffix = _ref3.customSuffix,\n      animate = _ref3.animate,\n      smallSuffix = _ref3.smallSuffix,\n      expPlus = _ref3.expPlus,\n      period = _ref3.period,\n      suffixSpace = _ref3.suffixSpace,\n      prefixSpace = _ref3.prefixSpace,\n      prefixSize = _ref3.prefixSize,\n      smallPrefix = _ref3.smallPrefix,\n      prefixLineHeight = _ref3.prefixLineHeight,\n      display = _ref3.display;\n\n  var _useState = useState(false),\n      isInitalized = _useState[0],\n      setIsInitalized = _useState[1];\n\n  var styles = {\n    weight: weight,\n    size: size,\n    smallSuffix: smallSuffix,\n    suffixSize: suffixSize,\n    color: color,\n    lineHeight: lineHeight,\n    smallPrefix: smallPrefix,\n    suffixLineHeight: suffixLineHeight,\n    prefixSize: prefixSize,\n    prefixLineHeight: prefixLineHeight,\n    display: display\n  };\n  if (data === undefined) return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  });\n  var suffix = getSuffix({\n    val: data,\n    custom: customSuffix,\n    perc: perc\n  });\n  return __jsx(React.Fragment, null, __jsx(Container, _extends({}, styles, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), prefix && __jsx(\"span\", {\n    className: \"prefix\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, prefix, prefixSpace && \" \"), animate ? __jsx(CountUp, {\n    end: data,\n    decimals: 3,\n    preserveValue: true,\n    formattingFn: function formattingFn(val) {\n      return getFormattedNumber({\n        val: val,\n        perc: perc,\n        expPlus: expPlus\n      });\n    },\n    onEnd: function onEnd() {\n      return !isInitalized && setIsInitalized(true);\n    },\n    duration: duration,\n    decimal: \".\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }) : getFormattedNumber({\n    val: data,\n    perc: perc,\n    expPlus: expPlus\n  }), suffix && __jsx(\"span\", {\n    className: \"suffix\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, suffixSpace && \" \", suffix), period && __jsx(\"span\", {\n    className: \"period\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \" \", period)));\n};\n\nexport default ConvertedNumber;","map":{"version":3,"sources":["/Users/andrasszesztai/Desktop/boring-barchart-nextjs/components/ConvertedNumber/index.jsx"],"names":["format","React","useState","CountUp","styled","keyframes","css","fontSizeM","fontWeightS","colorGrey","getFormattedNumber","val","perc","expPlus","formatKey","replace","getSuffix","custom","undefined","fadein","Container","span","props","display","isInitalized","size","weight","color","lineHeight","smallSuffix","smallPrefix","suffixSize","prefixSize","suffixLineHeight","prefixLineHeight","ConvertedNumber","data","duration","prefix","customSuffix","animate","period","suffixSpace","prefixSpace","setIsInitalized","styles","suffix"],"mappings":"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","sourcesContent":["import { format } from \"d3-format\";\nimport React, { useState } from \"react\";\nimport CountUp from \"react-countup\";\nimport styled, { keyframes, css } from \"styled-components\";\nimport {\n  fontSizeM,\n  fontWeightS,\n  colorGrey\n} from \"../../styles/sharedStyles\";\n\nexport const getFormattedNumber = ({ val, perc, expPlus }) => {\n  let formatKey;\n  if (perc) {\n    if (expPlus) {\n      if (-0.1 < val && val < 0.1) {\n        formatKey = \"+.2%\";\n      } else {\n        formatKey = \"+.1%\";\n      }\n    } else {\n      if (-0.1 < val && val < 0.1) {\n        formatKey = \".2%\";\n      } else {\n        formatKey = \".1%\";\n      }\n    }\n  } else {\n    if (expPlus) {\n      if (-1 < val && val < 1) {\n        formatKey = \"+.2f\";\n      } else {\n        formatKey = \"+.3s\";\n      }\n    } else {\n      if (-1 < val && val < 1) {\n        formatKey = \".2f\";\n      } else {\n        formatKey = \".3s\";\n      }\n    }\n  }\n  return val ? format(formatKey)(val).replace(/([a-zA-Z%])/g, \"\") : \"-\";\n};\n\nexport const getSuffix = ({ val, custom, perc }) => {\n  if (val === undefined) {\n    return \"\";\n  }\n  if (custom) {\n    return custom;\n  }\n  if (perc) {\n    return \"%\";\n  }\n  if (val < 1000) {\n    return \"\";\n  }\n  if (1000 <= val && val < 1000000) {\n    return \"K\";\n  }\n  if (1000000 <= val && val < 1000000000) {\n    return \"M\";\n  }\n  if (1000000000 <= val) {\n    return \"B\";\n  }\n};\nconst fadein = keyframes`\n    from { opacity: 0; }\n    to   { opacity: 1; }\n`;\n\nconst Container = styled.span`\n  display: ${props => props.display || 'flex'};\n  align-items: flex-end;\n\n  ${props =>\n    props.isInitalized &&\n    css`\n      animation: ${fadein} 2s;\n    `}\n  font-size: ${props => props.size}; \n  font-weight: ${props => props.weight};\n  color: ${props => props.color};\n  line-height: ${props => props.lineHeight};\n  ${props =>\n    (props.smallSuffix || props.smallPrefix) &&\n    css`\n      .suffix,\n      .prefix {\n        display: block;\n        font-size: ${props.suffixSize || props.prefixSize};\n        margin-left: 3px;\n        line-height: ${props.suffixLineHeight || props.prefixLineHeight};\n      }\n    `}\n`;\n\nconst ConvertedNumber = ({\n  data,\n  duration = 2,\n  perc,\n  prefix,\n  weight = fontWeightS,\n  size = fontSizeM,\n  color = colorGrey,\n  lineHeight = 1.2,\n  suffixSize,\n  suffixLineHeight,\n  customSuffix,\n  animate,\n  smallSuffix,\n  expPlus,\n  period,\n  suffixSpace,\n  prefixSpace,\n  prefixSize,\n  smallPrefix,\n  prefixLineHeight,\n  display\n}) => {\n  const [isInitalized, setIsInitalized] = useState(false);\n  const styles = {\n    weight,\n    size,\n    smallSuffix,\n    suffixSize,\n    color,\n    lineHeight,\n    smallPrefix,\n    suffixLineHeight,\n    prefixSize,\n    prefixLineHeight,\n    display\n  };\n  if (data === undefined) return <div></div>;\n  const suffix = getSuffix({ val: data, custom: customSuffix, perc });\n  return (\n    <>\n      <Container {...styles}>\n        {prefix && (\n          <span className=\"prefix\">\n            {prefix}\n            {prefixSpace && \" \"}\n          </span>\n        )}\n        {animate ? (\n          <CountUp\n            end={data}\n            decimals={3}\n            preserveValue\n            formattingFn={val => getFormattedNumber({ val, perc, expPlus })}\n            onEnd={() => !isInitalized && setIsInitalized(true)}\n            duration={duration}\n            decimal=\".\"\n          />\n        ) : (\n          getFormattedNumber({ val: data, perc, expPlus })\n        )}\n        {suffix && (\n          <span className=\"suffix\">\n            {suffixSpace && \" \"}\n            {suffix}\n          </span>\n        )}\n        {period && <span className=\"period\"> {period}</span>}\n      </Container>\n    </>\n  );\n};\n\nexport default ConvertedNumber;\n"]},"metadata":{},"sourceType":"module"}